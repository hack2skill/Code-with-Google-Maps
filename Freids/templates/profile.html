{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="{% static '/css/style.css'%}" />
  </head>
  <body>
      
      <nav class="navbar navbar-dark" style="background-color: #fff2df">
          <div class="container-fluid">
            <img
            src="{% static 'img/logo.jpeg' %}"
              alt="LocalVista"
              class="header-logo"
            />
    
            <!-- Use ms-auto to move the button to the right -->
            <button
              class="navbar-toggler ms-auto"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarToggleExternalContent"
              aria-controls="navbarToggleExternalContent"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <!-- <i class="fas fa-user"></i> -->
              <span
                class="navbar-toggler-icon"
                style="background-color: rgb(230, 221, 221)"
              ></span>
            </button>
          </div>
        </nav>
        
        <div class="collapse" id="navbarToggleExternalContent">
              {% if user_is_authenticated %}
              <div class="bg-white p-4">
                     <a href="{% url 'profile'  %}"> <h2 class="text-black h4">Profile</h2></a>
                      <!-- <span class="text-muted">Toggleable via the navbar brand.</span> -->
                      <!-- <h2 class="text-black h4">Logout</h2> -->
                      <a href="{% url 'profile'  %}"> <h2 class="text-black h4">Logout</h2></a>
                      <a href="{% url 'feed'  %}"> <h2 class="text-black h4">Feed</h2></a>
                    </div>            
        
        {% else %}
        <div class="bg-white p-4">
              <h2 class="text-black h4">Login</h2>
              <a href="{% url 'profile'  %}"> <h2 class="text-black h4">Login</h2></a>
              <!-- <span class="text-muted">Toggleable via the navbar brand.</span> -->
              <h2 class="text-black h4">Signup</h2>
            </div>

          {% endif %}
        </div>
        <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"
  ></script>
    <section style="background-color: #f9f8f5">
      <div class="container">
        <div class="row">
          <div class="col-lg-4">
            <div class="card mb-4">
              <div class="card-body text-center">
                <img
                  src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp"
                  alt="avatar"
                  class="rounded-circle img-fluid"
                  style="width: 150px"
                />
                <h5 class="my-3 username">John Smith</h5>
              </div>
              <div class="col-lg-8">
                <div class="card mb-4">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-sm-3">
                        <p class="mb-0">Full Name</p>
                      </div>
                      <div class="col-sm-9">
                        <p class="text-muted mb-0 first_name">Johnatan Smith</p>
                        <p class="text-muted mb-0 last_name">Johnatan Smith</p>
                      </div>
                    </div>
                    <hr />
                    <div class="row">
                      <div class="col-sm-3">
                        <p class="mb-0 ">Email</p>
                      </div>
                      <div class="col-sm-9">
                        <p class="text-muted mb-0 email">example@example.com</p>
                      </div>
                    </div>
                    <hr />
                    <div class="row">
                      <div class="col-sm-3">
                        <p class="mb-0">Mobile</p>
                      </div>
                      <div class="col-sm-9">
                        <p class="text-muted mb-0 phone_number">(098) 765-4321</p>
                      </div>
                    </div>
                    <hr />
                    <div class="row">
                      <div class="col-sm-3">
                        <p class="mb-0 ">User Since</p>
                      </div>
                      <div class="col-sm-9">
                        <p class="text-muted mb-0 date_joined">
                          Bay Area, San Francisco, CA
                        </p>
                      </div>
                    </div>
                    <hr />
                    <!-- <div class="row">
                      <div class="col-sm-3">
                        <p class="mb-0">Food Preference</p>
                      </div>
                      <div>
                        <span class="chip">
                          John Doe
                          <span
                            class="closebtn"
                            onclick="this.parentElement.style.display='none'"
                            >&times;</span
                          >
                        </span>
                        <span class="chip">
                          John Doe
                          <span
                            class="closebtn"
                            onclick="this.parentElement.style.display='none'"
                            >&times;</span
                          >
                        </span>
                      </div>
                    </div> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <footer class="footer">
      &copy; 2023 LocalVista
      <div class="social-icons">
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
      </div>
    </footer>
    <script src="{% static 'js/base.js' %}"></script>
    <script>


// Add an event listener for the DOMContentLoaded event
document.addEventListener('DOMContentLoaded', function () {

    getUserDetails(function (error, data) {
        if (error) {
            // Handle login error here, e.g., display an error message
            console.error('Login failed: ' + error);
        } else {
            
    
            // Update HTML content based on the response data
            updateHTMLContent(data);
        }});
    
   

    // Function to update HTML content based on response data
    function updateHTMLContent(data) {
        for (const key in data) {
            const value = data[key];
            if (typeof value === 'object') {
                // If the value is an object, handle it accordingly
                updateHTMLContent( value);
            } else {
                const element = document.querySelector(`.${key}`);
                if (element) {
                    element.textContent = value;
                } else {
                    console.log(`Variable ${key} not found in HTML.`);
                }
            }
            
        }
    }
});


        
    </script>
  </body>
</html>
